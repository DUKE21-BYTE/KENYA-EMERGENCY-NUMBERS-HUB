<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emergency Contacts ‚Äì Kenya | Call for Help Now</title>
    <meta
      name="description"
      content="Kenya emergency contacts. Police, Ambulance, Fire, KPLC, Water. Click to call. Save this link for emergencies."
    />
    <meta
      name="keywords"
      content="emergency numbers Kenya, police hotline Nairobi, ambulance contacts Kenya, fire brigade Kenya, KPLC emergency, emergency services Kenya"
    />
    <meta name="theme-color" content="#B91C1C" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;700;900&family=DM+Sans:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      :root {
        --bg: #fafaf9;
        --bg-card: #ffffff;
        --text: #1c1917;
        --text-secondary: #57534e;
        --red: #b91c1c;
        --red-dark: #991b1b;
        --red-light: #fee2e2;
        --red-glow: #dc2626;
        --border: #e7e5e4;
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        --accent-police: #1e3a5f;
        --accent-ambulance: #b91c1c;
        --accent-fire: #c2410c;
        --accent-power: #ca8a04;
        --accent-water: #0369a1;
        --accent-disaster: #7c3aed;
        --accent-child: #0d9488;
        --accent-gbv: #be185d;
        --radius: 12px;
        --radius-lg: 16px;
      }
      html.dark {
        --bg: #0c0a09;
        --bg-card: #1c1917;
        --text: #fafaf9;
        --text-secondary: #a8a29e;
        --red: #dc2626;
        --red-dark: #ef4444;
        --red-light: #450a0a;
        --red-glow: #ef4444;
        --border: #292524;
        --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }
      html {
        font-family: "DM Sans", system-ui, sans-serif;
        background: var(--bg);
        color: var(--text);
        scroll-behavior: smooth;
        -webkit-text-size-adjust: 100%;
      }
      body {
        min-height: 100dvh;
        padding-bottom: env(safe-area-inset-bottom);
      }

      /* HEADER */
      .header {
        background: var(--red);
        color: #fff;
        padding: 16px 16px 20px;
        text-align: center;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 12px rgba(185, 28, 28, 0.35);
      }
      html.dark .header {
        background: #450a0a;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.5);
      }
      .header h1 {
        font-family: "Outfit", sans-serif;
        font-weight: 900;
        font-size: clamp(20px, 5vw, 28px);
        letter-spacing: -0.02em;
        line-height: 1.15;
        margin-bottom: 2px;
      }
      .header p {
        font-size: 14px;
        opacity: 0.9;
        font-weight: 500;
      }
      .header .badge {
        display: inline-block;
        background: rgba(255, 255, 255, 0.2);
        padding: 2px 10px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        margin-top: 6px;
        letter-spacing: 0.03em;
      }
      html.dark .header .badge {
        background: rgba(255, 255, 255, 0.1);
      }

      /* QUICK DIAL */
      .quick-section {
        padding: 16px;
        background: var(--bg);
      }
      .quick-section h2 {
        font-family: "Outfit", sans-serif;
        font-weight: 700;
        font-size: 15px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-secondary);
        margin-bottom: 12px;
      }
      .quick-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
      }
      @media (min-width: 480px) {
        .quick-grid {
          grid-template-columns: repeat(4, 1fr);
        }
      }
      .quick-btn {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        padding: 16px 8px;
        border-radius: var(--radius-lg);
        border: 2px solid var(--border);
        background: var(--bg-card);
        text-decoration: none;
        color: var(--text);
        font-weight: 700;
        font-size: 14px;
        min-height: 88px;
        box-shadow: var(--shadow);
        -webkit-tap-highlight-color: transparent;
        transition:
          border-color 0.15s,
          box-shadow 0.15s;
      }
      .quick-btn:active {
        border-color: var(--red);
        box-shadow: 0 0 0 3px var(--red-light);
      }
      .quick-btn .icon {
        font-size: 28px;
        line-height: 1;
      }
      .quick-btn .num {
        font-size: 18px;
        font-family: "Outfit", sans-serif;
        font-weight: 900;
        color: var(--red);
        letter-spacing: -0.01em;
      }
      .quick-btn .label {
        font-size: 11px;
        font-weight: 600;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      /* COUNTY SELECTOR */
      .county-bar {
        padding: 12px 16px;
        background: var(--bg);
        position: sticky;
        top: 76px;
        z-index: 90;
      }
      @media (min-width: 480px) {
        .county-bar {
          top: 82px;
        }
      }
      .county-bar select {
        width: 100%;
        padding: 14px 16px;
        font-size: 16px;
        font-family: "DM Sans", sans-serif;
        font-weight: 600;
        border: 2px solid var(--border);
        border-radius: var(--radius);
        background: var(--bg-card);
        color: var(--text);
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%2378716c' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 14px center;
      }
      html.dark .county-bar select {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23a8a29e' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
      }

      /* SEARCH */
      .search-bar {
        padding: 0 16px 12px;
        background: var(--bg);
      }
      .search-bar input {
        width: 100%;
        padding: 12px 16px 12px 44px;
        font-size: 16px;
        font-family: "DM Sans", sans-serif;
        font-weight: 500;
        border: 2px solid var(--border);
        border-radius: var(--radius);
        background: var(--bg-card);
        color: var(--text);
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 24 24' fill='none' stroke='%2378716c' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: 14px center;
      }
      .search-bar input::placeholder {
        color: var(--text-secondary);
      }

      /* CATEGORY SECTIONS */
      .cat-section {
        padding: 0 16px 8px;
      }
      .cat-header {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 14px 0 10px;
        border-bottom: 2px solid var(--border);
        margin-bottom: 10px;
      }
      .cat-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        flex-shrink: 0;
      }
      .cat-header h3 {
        font-family: "Outfit", sans-serif;
        font-weight: 700;
        font-size: 17px;
        letter-spacing: -0.01em;
      }
      .cat-header .count {
        font-size: 12px;
        font-weight: 600;
        color: var(--text-secondary);
        background: var(--red-light);
        padding: 2px 8px;
        border-radius: 10px;
        margin-left: auto;
      }
      html.dark .cat-header .count {
        color: var(--red-dark);
      }

      /* CONTACT CARDS */
      .card {
        display: flex;
        align-items: center;
        gap: 14px;
        padding: 14px;
        margin-bottom: 8px;
        border-radius: var(--radius);
        background: var(--bg-card);
        border: 1.5px solid var(--border);
        box-shadow: var(--shadow);
        text-decoration: none;
        color: var(--text);
        -webkit-tap-highlight-color: transparent;
        transition: border-color 0.15s;
      }
      .card:active {
        border-color: var(--red);
      }
      .card-icon {
        width: 44px;
        height: 44px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        flex-shrink: 0;
        color: #fff;
        font-weight: 700;
      }
      .card-body {
        flex: 1;
        min-width: 0;
      }
      .card-name {
        font-weight: 700;
        font-size: 15px;
        line-height: 1.25;
        margin-bottom: 2px;
      }
      .card-area {
        font-size: 12px;
        color: var(--text-secondary);
        font-weight: 500;
      }
      .card-phone {
        font-family: "Outfit", sans-serif;
        font-weight: 900;
        font-size: 18px;
        color: var(--red);
        white-space: nowrap;
        letter-spacing: -0.01em;
        flex-shrink: 0;
      }
      .card-call {
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .card-call-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: var(--red);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }
      .card-call-icon svg {
        width: 16px;
        height: 16px;
        fill: #fff;
      }

      /* NO RESULTS */
      .no-results {
        text-align: center;
        padding: 40px 20px;
        color: var(--text-secondary);
        font-weight: 600;
        font-size: 15px;
        display: none;
      }

      /* FOOTER */
      .footer {
        padding: 24px 16px 32px;
        text-align: center;
        border-top: 2px solid var(--border);
        margin-top: 12px;
      }
      .footer p {
        font-size: 13px;
        color: var(--text-secondary);
        margin-bottom: 16px;
        font-weight: 500;
        line-height: 1.5;
      }
      .footer-actions {
        display: flex;
        flex-direction: column;
        gap: 10px;
        max-width: 320px;
        margin: 0 auto;
      }
      .footer-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 14px;
        border-radius: var(--radius);
        font-size: 15px;
        font-weight: 700;
        font-family: "DM Sans", sans-serif;
        text-decoration: none;
        border: none;
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
      }
      .btn-whatsapp {
        background: #25d366;
        color: #fff;
      }
      .btn-whatsapp:active {
        background: #1da851;
      }
      .btn-copy {
        background: var(--bg-card);
        color: var(--text);
        border: 2px solid var(--border);
      }
      .btn-copy:active {
        background: var(--red-light);
        border-color: var(--red);
      }
      .footer-note {
        font-size: 11px;
        color: var(--text-secondary);
        margin-top: 16px;
        opacity: 0.7;
      }

      /* HIDDEN */
      .hidden {
        display: none !important;
      }

      /* CUSTOM MODAL */
      .modal-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 200;
        padding: 16px;
      }
      .modal-box {
        background: var(--bg-card);
        border-radius: var(--radius-lg);
        padding: 24px;
        max-width: 300px;
        width: 100%;
        text-align: center;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      }
      .modal-box p {
        font-size: 15px;
        font-weight: 600;
        margin-bottom: 16px;
        color: var(--text);
      }
      .modal-box button {
        padding: 10px 24px;
        border-radius: var(--radius);
        background: var(--red);
        color: #fff;
        border: none;
        font-size: 14px;
        font-weight: 700;
        font-family: "DM Sans", sans-serif;
        cursor: pointer;
      }

      /* Toast */
      .toast {
        position: fixed;
        bottom: 24px;
        left: 50%;
        transform: translateX(-50%);
        background: var(--text);
        color: var(--bg);
        padding: 10px 20px;
        border-radius: var(--radius);
        font-size: 14px;
        font-weight: 600;
        z-index: 300;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s;
      }
      .toast.show {
        opacity: 1;
      }
    </style>
  </head>
  <body>
    <header class="header">
      <h1>üÜò Emergency Contacts ‚Äì Kenya</h1>
      <p>Tap a number to call immediately</p>
      <span class="badge">üá∞üá™ SAVE THIS LINK</span>
    </header>

    <section class="quick-section">
      <h2>Quick Dial</h2>
      <div class="quick-grid">
        <a href="tel:999" class="quick-btn">
          <span class="icon">üöì</span>
          <span class="num">999</span>
          <span class="label">Police</span>
        </a>
        <a href="tel:1199" class="quick-btn">
          <span class="icon">üöë</span>
          <span class="num">1199</span>
          <span class="label">Ambulance</span>
        </a>
        <a href="tel:999" class="quick-btn">
          <span class="icon">üöí</span>
          <span class="num">999</span>
          <span class="label">Fire</span>
        </a>
        <a href="tel:112" class="quick-btn">
          <span class="icon">üìû</span>
          <span class="num">112</span>
          <span class="label">Universal</span>
        </a>
        <a href="tel:0703070707" class="quick-btn">
          <span class="icon">‚ö°</span>
          <span class="num">0703 070 707</span>
          <span class="label">KPLC</span>
        </a>
        <a href="tel:0800723253" class="quick-btn">
          <span class="icon">üåç</span>
          <span class="num">0800 723 253</span>
          <span class="label">Disaster</span>
        </a>
        <a href="tel:116" class="quick-btn">
          <span class="icon">üë∂</span>
          <span class="num">116</span>
          <span class="label">Child Help</span>
        </a>
        <a href="tel:1195" class="quick-btn">
          <span class="icon">üõ°Ô∏è</span>
          <span class="num">1195</span>
          <span class="label">GBV Hotline</span>
        </a>
      </div>
    </section>

    <div class="county-bar">
      <select id="countySelect" aria-label="Filter by county">
        <option value="all">All Counties</option>
      </select>
    </div>

    <div class="search-bar">
      <input
        type="text"
        id="searchInput"
        placeholder="Search service or number‚Ä¶"
        aria-label="Search contacts"
      />
    </div>

    <main id="contactList"></main>
    <div class="no-results" id="noResults">
      No contacts found. Try a different search or county.
    </div>

    <footer class="footer">
      <p>
        In a life-threatening emergency,
        <strong>always call 999 or 112 first</strong>.<br />Keep this page
        bookmarked.
      </p>
      <div class="footer-actions">
        <button
          class="footer-btn btn-whatsapp"
          id="shareWhatsApp"
          type="button"
        >
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
            />
          </svg>
          Share on WhatsApp
        </button>
        <button class="footer-btn btn-copy" id="copyLink" type="button">
          üìã Copy Link
        </button>
      </div>
      <p class="footer-note">
        Data verified as of 2025. If a number has changed, please report it.
      </p>
    </footer>

    <div class="toast" id="toast"></div>

    <script>
      /* === DARK MODE === */
      if (
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches
      ) {
        document.documentElement.classList.add("dark");
      }
      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", function (event) {
          if (event.matches) {
            document.documentElement.classList.add("dark");
          } else {
            document.documentElement.classList.remove("dark");
          }
        });

      /* === EMERGENCY DATA === */
      var CONTACTS = [
        /* ‚îÄ‚îÄ‚îÄ NATIONAL POLICE ‚îÄ‚îÄ‚îÄ */
        {
          cat: "police",
          name: "Kenya Police",
          phone: "999",
          area: "Nationwide",
          county: "all",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Universal Emergency",
          phone: "112",
          area: "Nationwide (all networks)",
          county: "all",
          icon: "üìû",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "National Police Service",
          phone: "0800 720 553",
          area: "Nationwide ‚Äì Toll Free",
          county: "all",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "DCI (Directorate of Criminal Investigations)",
          phone: "0800 722 203",
          area: "Nationwide",
          county: "all",
          icon: "üîç",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Anti-Terror Police Unit",
          phone: "0800 723 108",
          area: "Nationwide",
          county: "all",
          icon: "üõ°Ô∏è",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Nairobi Central Police",
          phone: "020 2222222",
          area: "Nairobi",
          county: "nairobi",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Mombasa Central Police",
          phone: "041 2225501",
          area: "Mombasa",
          county: "mombasa",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Kisumu Central Police",
          phone: "057 2020550",
          area: "Kisumu",
          county: "kisumu",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Nakuru Central Police",
          phone: "051 2211444",
          area: "Nakuru",
          county: "nakuru",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Eldoret Central Police",
          phone: "053 2033500",
          area: "Uasin Gishu",
          county: "uasin_gishu",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Nyeri Central Police",
          phone: "061 2030399",
          area: "Nyeri",
          county: "nyeri",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Thika Police Station",
          phone: "067 2022222",
          area: "Kiambu",
          county: "kiambu",
          icon: "üöì",
          color: "var(--accent-police)",
        },
        {
          cat: "police",
          name: "Machakos Police Station",
          phone: "044 2021222",
          area: "Machakos",
          county: "machakos",
          icon: "üöì",
          color: "var(--accent-police)",
        },

        /* ‚îÄ‚îÄ‚îÄ AMBULANCE / RED CROSS ‚îÄ‚îÄ‚îÄ */
        {
          cat: "ambulance",
          name: "Kenya Red Cross",
          phone: "1199",
          area: "Nationwide",
          county: "all",
          icon: "üöë",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "St John Ambulance",
          phone: "0721 225 285",
          area: "Nationwide",
          county: "all",
          icon: "üöë",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "AMREF Flying Doctors",
          phone: "020 6992000",
          area: "Nationwide ‚Äì Air Rescue",
          county: "all",
          icon: "üöÅ",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "E-Plus Ambulance (AAR)",
          phone: "0700 395 395",
          area: "Nairobi & Major Cities",
          county: "all",
          icon: "üöë",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "Rescue.co",
          phone: "0800 723 253",
          area: "Nairobi",
          county: "nairobi",
          icon: "üöë",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "KNH Emergency",
          phone: "020 2726300",
          area: "Nairobi ‚Äì Kenyatta National Hospital",
          county: "nairobi",
          icon: "üè•",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "Aga Khan Hospital Emergency",
          phone: "020 3662000",
          area: "Nairobi",
          county: "nairobi",
          icon: "üè•",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "Mombasa Hospital Emergency",
          phone: "041 2312191",
          area: "Mombasa",
          county: "mombasa",
          icon: "üè•",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "Nakuru Level 5 Hospital",
          phone: "051 2212761",
          area: "Nakuru",
          county: "nakuru",
          icon: "üè•",
          color: "var(--accent-ambulance)",
        },
        {
          cat: "ambulance",
          name: "Kisumu County Hospital",
          phone: "057 2020508",
          area: "Kisumu",
          county: "kisumu",
          icon: "üè•",
          color: "var(--accent-ambulance)",
        },

        /* ‚îÄ‚îÄ‚îÄ FIRE BRIGADE ‚îÄ‚îÄ‚îÄ */
        {
          cat: "fire",
          name: "Kenya Fire & Rescue (National)",
          phone: "999",
          area: "Nationwide",
          county: "all",
          icon: "üöí",
          color: "var(--accent-fire)",
        },
        {
          cat: "fire",
          name: "Nairobi Fire Station",
          phone: "020 2222181",
          area: "Nairobi",
          county: "nairobi",
          icon: "üöí",
          color: "var(--accent-fire)",
        },
        {
          cat: "fire",
          name: "Mombasa Fire Station",
          phone: "041 2230453",
          area: "Mombasa",
          county: "mombasa",
          icon: "üöí",
          color: "var(--accent-fire)",
        },
        {
          cat: "fire",
          name: "Kisumu Fire Station",
          phone: "057 2023999",
          area: "Kisumu",
          county: "kisumu",
          icon: "üöí",
          color: "var(--accent-fire)",
        },
        {
          cat: "fire",
          name: "Nakuru Fire Station",
          phone: "051 2217665",
          area: "Nakuru",
          county: "nakuru",
          icon: "üöí",
          color: "var(--accent-fire)",
        },
        {
          cat: "fire",
          name: "Eldoret Fire Station",
          phone: "053 2062222",
          area: "Uasin Gishu",
          county: "uasin_gishu",
          icon: "üöí",
          color: "var(--accent-fire)",
        },

        /* ‚îÄ‚îÄ‚îÄ KPLC / POWER ‚îÄ‚îÄ‚îÄ */
        {
          cat: "power",
          name: "KPLC Emergency",
          phone: "0703 070 707",
          area: "Nationwide",
          county: "all",
          icon: "‚ö°",
          color: "var(--accent-power)",
        },
        {
          cat: "power",
          name: "KPLC Toll Free",
          phone: "0800 723 253",
          area: "Nationwide",
          county: "all",
          icon: "‚ö°",
          color: "var(--accent-power)",
        },
        {
          cat: "power",
          name: "Kenya Power (SMS Reporting)",
          phone: "0703 070 707",
          area: "SMS KPLC to 95551",
          county: "all",
          icon: "üì±",
          color: "var(--accent-power)",
        },
        {
          cat: "power",
          name: "KPLC Nairobi Region",
          phone: "020 3201000",
          area: "Nairobi",
          county: "nairobi",
          icon: "‚ö°",
          color: "var(--accent-power)",
        },
        {
          cat: "power",
          name: "KPLC Coast Region",
          phone: "041 2315188",
          area: "Mombasa & Coast",
          county: "mombasa",
          icon: "‚ö°",
          color: "var(--accent-power)",
        },

        /* ‚îÄ‚îÄ‚îÄ WATER ‚îÄ‚îÄ‚îÄ */
        {
          cat: "water",
          name: "Nairobi Water & Sewerage",
          phone: "020 3984000",
          area: "Nairobi",
          county: "nairobi",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "Nairobi Water Emergency",
          phone: "0800 721 543",
          area: "Nairobi ‚Äì Toll Free",
          county: "nairobi",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "Mombasa Water Supply",
          phone: "041 2222973",
          area: "Mombasa",
          county: "mombasa",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "Kisumu Water & Sanitation",
          phone: "057 2023972",
          area: "Kisumu",
          county: "kisumu",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "Nakuru Water & Sanitation",
          phone: "051 2215751",
          area: "Nakuru",
          county: "nakuru",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "Eldoret Water & Sanitation",
          phone: "053 2033541",
          area: "Uasin Gishu",
          county: "uasin_gishu",
          icon: "üíß",
          color: "var(--accent-water)",
        },
        {
          cat: "water",
          name: "WASREB (Regulator)",
          phone: "020 2733561",
          area: "Nationwide",
          county: "all",
          icon: "üíß",
          color: "var(--accent-water)",
        },

        /* ‚îÄ‚îÄ‚îÄ DISASTER RESPONSE ‚îÄ‚îÄ‚îÄ */
        {
          cat: "disaster",
          name: "National Disaster Operations Centre",
          phone: "0800 723 253",
          area: "Nationwide ‚Äì Toll Free",
          county: "all",
          icon: "üåç",
          color: "var(--accent-disaster)",
        },
        {
          cat: "disaster",
          name: "National Disaster Management Unit",
          phone: "020 2211263",
          area: "Nationwide",
          county: "all",
          icon: "üåç",
          color: "var(--accent-disaster)",
        },
        {
          cat: "disaster",
          name: "Kenya Meteorological Dept",
          phone: "020 3867880",
          area: "Nationwide ‚Äì Weather Alerts",
          county: "all",
          icon: "üå¶Ô∏è",
          color: "var(--accent-disaster)",
        },
        {
          cat: "disaster",
          name: "NEMA (Environment Authority)",
          phone: "0800 720 543",
          area: "Nationwide ‚Äì Environmental",
          county: "all",
          icon: "üåø",
          color: "var(--accent-disaster)",
        },

        /* ‚îÄ‚îÄ‚îÄ CHILD HELPLINE ‚îÄ‚îÄ‚îÄ */
        {
          cat: "child",
          name: "Childline Kenya",
          phone: "116",
          area: "Nationwide ‚Äì Free Call",
          county: "all",
          icon: "üë∂",
          color: "var(--accent-child)",
        },
        {
          cat: "child",
          name: "Child Welfare Society of Kenya",
          phone: "020 2727497",
          area: "Nationwide",
          county: "all",
          icon: "üßí",
          color: "var(--accent-child)",
        },
        {
          cat: "child",
          name: "UNICEF Kenya",
          phone: "020 7622034",
          area: "Nationwide",
          county: "all",
          icon: "üåê",
          color: "var(--accent-child)",
        },

        /* ‚îÄ‚îÄ‚îÄ GBV HOTLINE ‚îÄ‚îÄ‚îÄ */
        {
          cat: "gbv",
          name: "GBV National Hotline",
          phone: "1195",
          area: "Nationwide ‚Äì Free Call",
          county: "all",
          icon: "üõ°Ô∏è",
          color: "var(--accent-gbv)",
        },
        {
          cat: "gbv",
          name: "FIDA Kenya (Women's Rights)",
          phone: "0722 509 760",
          area: "Nationwide",
          county: "all",
          icon: "‚öñÔ∏è",
          color: "var(--accent-gbv)",
        },
        {
          cat: "gbv",
          name: "Gender Violence Recovery Centre",
          phone: "020 2726300",
          area: "Nairobi ‚Äì KNH",
          county: "nairobi",
          icon: "üè•",
          color: "var(--accent-gbv)",
        },
        {
          cat: "gbv",
          name: "Coalition on Violence Against Women",
          phone: "020 3874296",
          area: "Nationwide",
          county: "all",
          icon: "ü§ù",
          color: "var(--accent-gbv)",
        },
      ];

      var CATEGORIES = {
        police: { label: "National Police", dot: "var(--accent-police)" },
        ambulance: {
          label: "Ambulance / Red Cross",
          dot: "var(--accent-ambulance)",
        },
        fire: { label: "Fire Brigade", dot: "var(--accent-fire)" },
        power: { label: "KPLC / Power", dot: "var(--accent-power)" },
        water: { label: "Water Companies", dot: "var(--accent-water)" },
        disaster: { label: "Disaster Response", dot: "var(--accent-disaster)" },
        child: { label: "Child Helpline", dot: "var(--accent-child)" },
        gbv: { label: "GBV Hotline", dot: "var(--accent-gbv)" },
      };

      var COUNTIES = [
        { value: "all", label: "All Counties" },
        { value: "nairobi", label: "Nairobi" },
        { value: "mombasa", label: "Mombasa" },
        { value: "kisumu", label: "Kisumu" },
        { value: "nakuru", label: "Nakuru" },
        { value: "uasin_gishu", label: "Uasin Gishu (Eldoret)" },
        { value: "kiambu", label: "Kiambu" },
        { value: "machakos", label: "Machakos" },
        { value: "nyeri", label: "Nyeri" },
      ];

      /* === POPULATE COUNTY SELECTOR === */
      var countySelect = document.getElementById("countySelect");
      countySelect.innerHTML = "";
      COUNTIES.forEach(function (c) {
        var opt = document.createElement("option");
        opt.value = c.value;
        opt.textContent = c.label;
        countySelect.appendChild(opt);
      });

      /* === RENDER CONTACTS === */
      function phoneToTel(p) {
        return p.replace(/[\s\-()]/g, "");
      }

      function renderContacts() {
        var county = countySelect.value;
        var query = document
          .getElementById("searchInput")
          .value.toLowerCase()
          .trim();
        var container = document.getElementById("contactList");
        var noResults = document.getElementById("noResults");
        container.innerHTML = "";
        var totalVisible = 0;

        var catKeys = Object.keys(CATEGORIES);
        catKeys.forEach(function (catKey) {
          var catInfo = CATEGORIES[catKey];
          var items = CONTACTS.filter(function (c) {
            if (c.cat !== catKey) return false;
            if (county !== "all" && c.county !== "all" && c.county !== county)
              return false;
            if (query) {
              var haystack = (
                c.name +
                " " +
                c.phone +
                " " +
                c.area
              ).toLowerCase();
              return haystack.indexOf(query) !== -1;
            }
            return true;
          });

          if (items.length === 0) return;
          totalVisible += items.length;

          var section = document.createElement("section");
          section.className = "cat-section";

          var header = document.createElement("div");
          header.className = "cat-header";
          header.innerHTML =
            '<span class="cat-dot" style="background:' +
            catInfo.dot +
            '"></span>' +
            "<h3>" +
            catInfo.label +
            "</h3>" +
            '<span class="count">' +
            items.length +
            "</span>";
          section.appendChild(header);

          items.forEach(function (c) {
            var tel = phoneToTel(c.phone);
            var a = document.createElement("a");
            a.href = "tel:" + tel;
            a.className = "card";
            a.setAttribute("aria-label", "Call " + c.name + " at " + c.phone);
            a.innerHTML =
              '<span class="card-icon" style="background:' +
              c.color +
              '">' +
              c.icon +
              "</span>" +
              '<span class="card-body">' +
              '<span class="card-name">' +
              c.name +
              "</span>" +
              '<span class="card-area">' +
              c.area +
              "</span>" +
              "</span>" +
              '<span class="card-call">' +
              '<span class="card-phone">' +
              c.phone +
              "</span>" +
              '<span class="card-call-icon"><svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg></span>' +
              "</span>";
            section.appendChild(a);
          });

          container.appendChild(section);
        });

        if (totalVisible === 0) {
          noResults.style.display = "block";
        } else {
          noResults.style.display = "none";
        }
      }

      /* === EVENT LISTENERS === */
      countySelect.addEventListener("change", renderContacts);
      document
        .getElementById("searchInput")
        .addEventListener("input", renderContacts);

      /* === SHARE / COPY === */
      function showToast(msg) {
        var toast = document.getElementById("toast");
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(function () {
          toast.classList.remove("show");
        }, 2200);
      }

      document
        .getElementById("shareWhatsApp")
        .addEventListener("click", function () {
          var text = encodeURIComponent(
            "üÜò Kenya Emergency Contacts ‚Äì Save this link!\n\nüöì Police: 999\nüöë Red Cross: 1199\nüöí Fire: 999\nüìû Universal: 112\n‚ö° KPLC: 0703 070 707\nüë∂ Childline: 116\nüõ°Ô∏è GBV: 1195\n\nFull list: " +
              window.location.href,
          );
          window.open("https://wa.me/?text=" + text, "_blank");
        });

      document
        .getElementById("copyLink")
        .addEventListener("click", function () {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard
              .writeText(window.location.href)
              .then(function () {
                showToast("Link copied!");
              });
          } else {
            showToast("Could not copy link");
          }
        });

      /* === INIT === */
      renderContacts();
    </script>
  </body>
</html>
