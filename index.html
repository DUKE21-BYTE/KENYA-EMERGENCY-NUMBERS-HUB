<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Emergency Contacts â€“ Kenya | Call for Help Now</title>
<meta name="description" content="Kenya emergency contacts. Police, Ambulance, Fire, KPLC, Water. Click to call. Save this link for emergencies.">
<meta name="keywords" content="emergency numbers Kenya, police hotline Nairobi, ambulance contacts Kenya, fire brigade Kenya, KPLC emergency, emergency services Kenya">
<meta name="theme-color" content="#B91C1C">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@500;700;800&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}{-webkit-tap-highlight-color:transparent}
:root{
  --bg:#F3F4F6;
  --bg-card:#FFFFFF;
  --text:#111827;
  --text-secondary:#6B7280;
  --primary:#DC2626;
  --primary-gradient:linear-gradient(135deg, #DC2626 0%, #991B1B 100%);
  --primary-light:rgba(220, 38, 38, 0.1);
  --border:#E5E7EB;
  --shadow-sm:0 1px 2px 0 rgba(0,0,0,0.05);
  --shadow:0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
  --shadow-lg:0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05);
  --glass-bg:rgba(255, 255, 255, 0.9);
  --glass-border:rgba(255, 255, 255, 0.5);
  --radius:16px;
  
  --accent-police:#1E3A8A;
  --accent-ambulance:#DC2626;
  --accent-fire:#EA580C;
  --accent-power:#CA8A04;
  --accent-water:#0284C7;
  --accent-disaster:#7C3AED;
  --accent-child:#059669;
  --accent-gbv:#DB2777;
}
html.dark{
  --bg:#111827;
  --bg-card:#1F2937;
  --text:#F9FAFB;
  --text-secondary:#9CA3AF;
  --primary:#EF4444;
  --primary-gradient:linear-gradient(135deg, #EF4444 0%, #B91C1C 100%);
  --primary-light:rgba(239, 68, 68, 0.15);
  --border:#374151;
  --shadow-sm:0 1px 2px 0 rgba(0,0,0,0.5);
  --shadow:0 10px 15px -3px rgba(0,0,0,0.5);
  --glass-bg:rgba(31, 41, 55, 0.9);
  --glass-border:rgba(255, 255, 255, 0.1);
}
html{font-family:'DM Sans',system-ui,sans-serif;background:var(--bg);color:var(--text);scroll-behavior:smooth;-webkit-text-size-adjust:100%}
body{min-height:100dvh;padding-bottom:env(safe-area-inset-bottom);overflow-x:hidden}

/* UTILS */
.glass{backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);border-bottom:1px solid var(--border)}

/* HEADER */
.header{
  background:var(--primary-gradient);
  color:#fff;
  padding:24px 20px 28px;
  text-align:center;
  position:relative;
  z-index:100;
  box-shadow:0 10px 25px -5px rgba(220, 38, 38, 0.4);
  border-bottom-left-radius:32px;
  border-bottom-right-radius:32px;
  margin-bottom:20px;
}
html.dark .header{box-shadow:0 10px 25px -5px rgba(0,0,0,0.6)}
.header h1{font-family:'Outfit',sans-serif;font-weight:800;font-size:clamp(24px,6vw,32px);letter-spacing:-.03em;line-height:1.1;margin-bottom:8px;text-shadow:0 2px 4px rgba(0,0,0,0.1)}
.header p{font-size:15px;opacity:0.95;font-weight:500;letter-spacing:0.01em}
.header .badge{
  display:inline-flex;align-items:center;gap:6px;
  background:rgba(255,255,255,0.2);
  padding:6px 14px;
  border-radius:99px;
  font-size:12px;
  font-weight:700;
  margin-top:14px;
  letter-spacing:.04em;
  backdrop-filter:blur(4px);
  border:1px solid rgba(255,255,255,0.3);
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
}

/* QUICK DIAL */
.quick-section{padding:0 16px;max-width:800px;margin:0 auto 24px}
.quick-section h2{
  font-family:'Outfit',sans-serif;font-weight:700;font-size:13px;
  text-transform:uppercase;letter-spacing:.1em;color:var(--text-secondary);
  margin-bottom:16px;display:flex;align-items:center;gap:12px;
}
.quick-section h2::after{content:'';flex:1;height:1px;background:var(--border)}

.quick-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
@media(min-width:480px){.quick-grid{grid-template-columns:repeat(4,1fr)}}

.quick-btn{
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;
  padding:20px 12px;
  border-radius:24px;
  background:var(--bg-card);
  border:1px solid var(--border);
  text-decoration:none;
  color:var(--text);
  box-shadow:var(--shadow);
  transition:transform .1s cubic-bezier(0.4, 0, 0.2, 1), box-shadow .15s, border-color .15s;
  position:relative;
  overflow:hidden;
}
.quick-btn::before{
  content:'';position:absolute;inset:0;background:var(--primary);opacity:0;transition:opacity .15s;
}
.quick-btn:active{transform:scale(0.96);box-shadow:none;border-color:var(--primary)}
.quick-btn:active::before{opacity:0.04}

.quick-btn .icon{font-size:32px;line-height:1;filter:drop-shadow(0 4px 6px rgba(0,0,0,0.1))}
.quick-btn .num{font-size:22px;font-family:'Outfit',sans-serif;font-weight:800;color:var(--primary);letter-spacing:-.03em;z-index:1}
.quick-btn .label{font-size:11px;font-weight:700;color:var(--text-secondary);text-transform:uppercase;letter-spacing:.05em;z-index:1}

/* CONTROLS STICKY BAR */
.controls-container{
  position:sticky;
  top:0;
  z-index:90;
  padding:12px 16px;
  margin:0 -8px 24px; /* negative margin to pull full width on mobile if inside container */
  background:var(--glass-bg);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border);
  box-shadow:var(--shadow-sm);
}
.controls-wrapper{
  max-width:800px;margin:0 auto;
  display:flex;flex-direction:column;gap:12px;
}
@media(min-width:600px){.controls-wrapper{flex-direction:row;align-items:center}}

.control-input{
  width:100%;
  padding:14px 16px;
  font-size:16px; /* 16px prevents iOS zoom */
  font-family:'DM Sans',sans-serif;
  font-weight:500;
  border:1px solid var(--border);
  border-radius:14px;
  background:var(--bg-card);
  color:var(--text);
  box-shadow:var(--shadow-sm);
  transition:all 0.2s;
  appearance:none;
}
.control-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px var(--primary-light)}

select.control-input{
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 16px center;
}
input.control-input{
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%236B7280' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'%3E%3C/circle%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'%3E%3C/line%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:16px center;
  padding-left:48px;
}

/* LIST CONTAINER */
#contactList{max-width:800px;margin:0 auto;padding-bottom:40px}

/* CATEGORY SECTIONS */
.cat-section{padding:0 16px 24px}
.cat-header{
  display:flex;align-items:center;gap:12px;
  padding:8px 0 16px;
  margin-bottom:8px;
  position:sticky;
  top:78px; /* Below controls bar */
  z-index:80;
  background:var(--bg); /* Opaque background for sticky header */
}
.cat-dot{width:12px;height:12px;border-radius:50%;flex-shrink:0;box-shadow:0 0 0 2px var(--bg-card)}
.cat-header h3{font-family:'Outfit',sans-serif;font-weight:800;font-size:18px;letter-spacing:-.01em}
.cat-header .count{
  font-size:11px;font-weight:700;
  color:var(--text-secondary);
  background:var(--border);
  padding:2px 8px;
  border-radius:8px;
  margin-left:auto;
}

/* CONTACT CARDS */
.card{
  display:flex;align-items:center;gap:16px;
  padding:16px;
  margin-bottom:12px;
  border-radius:20px;
  background:var(--bg-card);
  border:1px solid transparent;
  box-shadow:var(--shadow);
  text-decoration:none;
  color:var(--text);
  -webkit-tap-highlight-color:transparent;
  transition:all .15s cubic-bezier(0.4, 0, 0.2, 1);
  position:relative;
}
.card:active{transform:scale(0.97);box-shadow:none;background:var(--bg-card)}

.card-icon{
  width:52px;height:52px;
  border-radius:16px;
  display:flex;align-items:center;justify-content:center;
  font-size:26px;
  flex-shrink:0;
  color:#fff;
  font-weight:700;
  box-shadow:0 8px 16px -4px rgba(0,0,0,0.2); 
  text-shadow:0 2px 4px rgba(0,0,0,0.1);
}
.card-body{flex:1;min-width:0}
.card-name{font-weight:700;font-size:16px;line-height:1.3;margin-bottom:4px}
.card-area{font-size:13px;color:var(--text-secondary);font-weight:500;display:flex;align-items:center;gap:4px}
.card-area::before{content:'ğŸ“';font-size:11px;opacity:0.8;filter:grayscale(1)}

.card-call{display:flex;align-items:center;gap:12px}
.card-phone{
  font-family:'Outfit',sans-serif;
  font-weight:800;
  font-size:20px;
  color:var(--primary);
  white-space:nowrap;
  letter-spacing:-.03em;
}
.card-call-btn{
  width:36px;height:36px;
  border-radius:50%;
  background:var(--primary-light);
  display:flex;align-items:center;justify-content:center;
  color:var(--primary);
  transition:background 0.2s;
}
.card:active .card-call-btn{background:var(--primary);color:#fff}
.card-call-btn svg{width:18px;height:18px;fill:currentColor}

/* NO RESULTS */
.no-results{text-align:center;padding:60px 20px;color:var(--text-secondary);font-weight:500;font-size:16px;display:none}

/* FOOTER */
.footer{padding:60px 20px 40px;text-align:center;border-top:1px solid var(--border);background:var(--bg-card);margin-top:20px}
.footer p{font-size:15px;color:var(--text-secondary);margin-bottom:24px;font-weight:500;line-height:1.6;max-width:500px;margin-left:auto;margin-right:auto}
.footer strong{color:var(--primary)}
.footer-actions{display:flex;flex-direction:column;gap:12px;max-width:320px;margin:0 auto}
.footer-btn{
  display:flex;align-items:center;justify-content:center;gap:10px;
  padding:16px;
  border-radius:16px;
  font-size:16px;
  font-weight:700;
  font-family:'DM Sans',sans-serif;
  text-decoration:none;
  border:none;
  cursor:pointer;
  transition:transform .1s;
  box-shadow:var(--shadow);
}
.footer-btn:active{transform:scale(0.96)}
.btn-whatsapp{background:#25D366;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,0.1)}
.btn-copy{background:var(--bg);color:var(--text);border:1px solid var(--border)}

.footer-note{font-size:13px;color:var(--text-secondary);margin-top:32px;opacity:0.6}

/* TOAST */
.toast{
  position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(20px);
  background:var(--text);color:var(--bg);
  padding:12px 24px;border-radius:99px;
  font-size:14px;font-weight:600;
  z-index:300;opacity:0;pointer-events:none;
  transition:all .3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  box-shadow:0 10px 25px -5px rgba(0,0,0,0.3);
}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
</style>
</head>
<body>

<header class="header">
  <h1>ğŸ†˜ Emergency Contacts</h1>
  <p>Tap a number to call immediately</p>
  <span class="badge">ğŸ‡°ğŸ‡ª SAVE THIS LINK</span>
</header>

<section class="quick-section">
  <h2>Quick Dial</h2>
  <div class="quick-grid">
    <a href="tel:999" class="quick-btn">
      <span class="icon">ğŸš“</span>
      <span class="num">999</span>
      <span class="label">Police</span>
    </a>
    <a href="tel:1199" class="quick-btn">
      <span class="icon">ğŸš‘</span>
      <span class="num">1199</span>
      <span class="label">Ambulance</span>
    </a>
    <a href="tel:999" class="quick-btn">
      <span class="icon">ğŸš’</span>
      <span class="num">999</span>
      <span class="label">Fire</span>
    </a>
    <a href="tel:112" class="quick-btn">
      <span class="icon">ğŸ“</span>
      <span class="num">112</span>
      <span class="label">Universal</span>
    </a>
    <a href="tel:0703070707" class="quick-btn">
      <span class="icon">âš¡</span>
      <span class="num">0703 070...</span>
      <span class="label">KPLC</span>
    </a>
    <a href="tel:0800723253" class="quick-btn">
      <span class="icon">ğŸŒ</span>
      <span class="num">0800 723...</span>
      <span class="label">Disaster</span>
    </a>
    <a href="tel:116" class="quick-btn">
      <span class="icon">ğŸ‘¶</span>
      <span class="num">116</span>
      <span class="label">Child Help</span>
    </a>
    <a href="tel:1195" class="quick-btn">
      <span class="icon">ğŸ›¡ï¸</span>
      <span class="num">1195</span>
      <span class="label">GBV Hotline</span>
    </a>
  </div>
</section>

<!-- Combined Sticky Bar -->
<div class="controls-container">
  <div class="controls-wrapper">
    <select id="countySelect" class="control-input" aria-label="Filter by county">
      <option value="all">ğŸ“ All Counties</option>
    </select>
    <input type="text" id="searchInput" class="control-input" placeholder="Search service or numberâ€¦" aria-label="Search contacts">
  </div>
</div>

<main id="contactList"></main>
<div class="no-results" id="noResults">No contacts found. Try a different search.</div>

<footer class="footer">
  <p>In a life-threatening emergency, <strong>always call 999 or 112 first</strong>.<br>Keep this page bookmarked for offline access.</p>
  <div class="footer-actions">
    <button class="footer-btn btn-whatsapp" id="shareWhatsApp" type="button">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
      Share on WhatsApp
    </button>
    <button class="footer-btn btn-copy" id="copyLink" type="button">
      ğŸ“‹ Copy Link
    </button>
  </div>
  <p class="footer-note">Data verified as of 2025. <a href="https://wa.me/254758596269" style="color:inherit;text-decoration:underline;">Report errors or updates: 0758 596 269</a></p>
</footer>

<div class="toast" id="toast"></div>

<script>
/* === DARK MODE === */
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
  document.documentElement.classList.add('dark');
}
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', function(event) {
  if (event.matches) {
    document.documentElement.classList.add('dark');
  } else {
    document.documentElement.classList.remove('dark');
  }
});

/* === EMERGENCY DATA === */
var CONTACTS = [
  /* â”€â”€â”€ NATIONAL POLICE â”€â”€â”€ */
  {cat:"police",name:"Kenya Police",phone:"999",area:"Nationwide",county:"all",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Universal Emergency",phone:"112",area:"Nationwide (all networks)",county:"all",icon:"ğŸ“",color:"var(--accent-police)"},
  {cat:"police",name:"National Police Service",phone:"0800 720 553",area:"Nationwide â€“ Toll Free",county:"all",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"DCI (Directorate of Criminal Investigations)",phone:"0800 722 203",area:"Nationwide",county:"all",icon:"ğŸ”",color:"var(--accent-police)"},
  {cat:"police",name:"Anti-Terror Police Unit",phone:"0800 723 108",area:"Nationwide",county:"all",icon:"ğŸ›¡ï¸",color:"var(--accent-police)"},
  {cat:"police",name:"Nairobi Central Police",phone:"020 2222222",area:"Nairobi",county:"nairobi",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Mombasa Central Police",phone:"041 2225501",area:"Mombasa",county:"mombasa",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Kisumu Central Police",phone:"057 2020550",area:"Kisumu",county:"kisumu",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Nakuru Central Police",phone:"051 2211444",area:"Nakuru",county:"nakuru",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Eldoret Central Police",phone:"053 2033500",area:"Uasin Gishu",county:"uasin_gishu",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Nyeri Central Police",phone:"061 2030399",area:"Nyeri",county:"nyeri",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Thika Police Station",phone:"067 2022222",area:"Kiambu",county:"kiambu",icon:"ğŸš“",color:"var(--accent-police)"},
  {cat:"police",name:"Machakos Police Station",phone:"044 2021222",area:"Machakos",county:"machakos",icon:"ğŸš“",color:"var(--accent-police)"},

  /* â”€â”€â”€ AMBULANCE / RED CROSS â”€â”€â”€ */
  {cat:"ambulance",name:"Kenya Red Cross",phone:"1199",area:"Nationwide",county:"all",icon:"ğŸš‘",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"St John Ambulance",phone:"0721 225 285",area:"Nationwide",county:"all",icon:"ğŸš‘",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"AMREF Flying Doctors",phone:"020 6992000",area:"Nationwide â€“ Air Rescue",county:"all",icon:"ğŸš",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"E-Plus Ambulance (AAR)",phone:"0700 395 395",area:"Nairobi & Major Cities",county:"all",icon:"ğŸš‘",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"Rescue.co",phone:"0800 723 253",area:"Nairobi",county:"nairobi",icon:"ğŸš‘",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"KNH Emergency",phone:"020 2726300",area:"Nairobi â€“ Kenyatta National Hospital",county:"nairobi",icon:"ğŸ¥",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"Aga Khan Hospital Emergency",phone:"020 3662000",area:"Nairobi",county:"nairobi",icon:"ğŸ¥",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"Mombasa Hospital Emergency",phone:"041 2312191",area:"Mombasa",county:"mombasa",icon:"ğŸ¥",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"Nakuru Level 5 Hospital",phone:"051 2212761",area:"Nakuru",county:"nakuru",icon:"ğŸ¥",color:"var(--accent-ambulance)"},
  {cat:"ambulance",name:"Kisumu County Hospital",phone:"057 2020508",area:"Kisumu",county:"kisumu",icon:"ğŸ¥",color:"var(--accent-ambulance)"},

  /* â”€â”€â”€ FIRE BRIGADE â”€â”€â”€ */
  {cat:"fire",name:"Kenya Fire & Rescue (National)",phone:"999",area:"Nationwide",county:"all",icon:"ğŸš’",color:"var(--accent-fire)"},
  {cat:"fire",name:"Nairobi Fire Station",phone:"020 2222181",area:"Nairobi",county:"nairobi",icon:"ğŸš’",color:"var(--accent-fire)"},
  {cat:"fire",name:"Mombasa Fire Station",phone:"041 2230453",area:"Mombasa",county:"mombasa",icon:"ğŸš’",color:"var(--accent-fire)"},
  {cat:"fire",name:"Kisumu Fire Station",phone:"057 2023999",area:"Kisumu",county:"kisumu",icon:"ğŸš’",color:"var(--accent-fire)"},
  {cat:"fire",name:"Nakuru Fire Station",phone:"051 2217665",area:"Nakuru",county:"nakuru",icon:"ğŸš’",color:"var(--accent-fire)"},
  {cat:"fire",name:"Eldoret Fire Station",phone:"053 2062222",area:"Uasin Gishu",county:"uasin_gishu",icon:"ğŸš’",color:"var(--accent-fire)"},

  /* â”€â”€â”€ KPLC / POWER â”€â”€â”€ */
  {cat:"power",name:"KPLC Emergency",phone:"0703 070 707",area:"Nationwide",county:"all",icon:"âš¡",color:"var(--accent-power)"},
  {cat:"power",name:"KPLC Toll Free",phone:"0800 723 253",area:"Nationwide",county:"all",icon:"âš¡",color:"var(--accent-power)"},
  {cat:"power",name:"Kenya Power (SMS Reporting)",phone:"0703 070 707",area:"SMS KPLC to 95551",county:"all",icon:"ğŸ“±",color:"var(--accent-power)"},
  {cat:"power",name:"KPLC Nairobi Region",phone:"020 3201000",area:"Nairobi",county:"nairobi",icon:"âš¡",color:"var(--accent-power)"},
  {cat:"power",name:"KPLC Coast Region",phone:"041 2315188",area:"Mombasa & Coast",county:"mombasa",icon:"âš¡",color:"var(--accent-power)"},

  /* â”€â”€â”€ WATER â”€â”€â”€ */
  {cat:"water",name:"Nairobi Water & Sewerage",phone:"020 3984000",area:"Nairobi",county:"nairobi",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"Nairobi Water Emergency",phone:"0800 721 543",area:"Nairobi â€“ Toll Free",county:"nairobi",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"Mombasa Water Supply",phone:"041 2222973",area:"Mombasa",county:"mombasa",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"Kisumu Water & Sanitation",phone:"057 2023972",area:"Kisumu",county:"kisumu",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"Nakuru Water & Sanitation",phone:"051 2215751",area:"Nakuru",county:"nakuru",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"Eldoret Water & Sanitation",phone:"053 2033541",area:"Uasin Gishu",county:"uasin_gishu",icon:"ğŸ’§",color:"var(--accent-water)"},
  {cat:"water",name:"WASREB (Regulator)",phone:"020 2733561",area:"Nationwide",county:"all",icon:"ğŸ’§",color:"var(--accent-water)"},

  /* â”€â”€â”€ DISASTER RESPONSE â”€â”€â”€ */
  {cat:"disaster",name:"National Disaster Operations Centre",phone:"0800 723 253",area:"Nationwide â€“ Toll Free",county:"all",icon:"ğŸŒ",color:"var(--accent-disaster)"},
  {cat:"disaster",name:"National Disaster Management Unit",phone:"020 2211263",area:"Nationwide",county:"all",icon:"ğŸŒ",color:"var(--accent-disaster)"},
  {cat:"disaster",name:"Kenya Meteorological Dept",phone:"020 3867880",area:"Nationwide â€“ Weather Alerts",county:"all",icon:"ğŸŒ¦ï¸",color:"var(--accent-disaster)"},
  {cat:"disaster",name:"NEMA (Environment Authority)",phone:"0800 720 543",area:"Nationwide â€“ Environmental",county:"all",icon:"ğŸŒ¿",color:"var(--accent-disaster)"},

  /* â”€â”€â”€ CHILD HELPLINE â”€â”€â”€ */
  {cat:"child",name:"Childline Kenya",phone:"116",area:"Nationwide â€“ Free Call",county:"all",icon:"ğŸ‘¶",color:"var(--accent-child)"},
  {cat:"child",name:"Child Welfare Society of Kenya",phone:"020 2727497",area:"Nationwide",county:"all",icon:"ğŸ§’",color:"var(--accent-child)"},
  {cat:"child",name:"UNICEF Kenya",phone:"020 7622034",area:"Nationwide",county:"all",icon:"ğŸŒ",color:"var(--accent-child)"},

  /* â”€â”€â”€ GBV HOTLINE â”€â”€â”€ */
  {cat:"gbv",name:"GBV National Hotline",phone:"1195",area:"Nationwide â€“ Free Call",county:"all",icon:"ğŸ›¡ï¸",color:"var(--accent-gbv)"},
  {cat:"gbv",name:"FIDA Kenya (Women's Rights)",phone:"0722 509 760",area:"Nationwide",county:"all",icon:"âš–ï¸",color:"var(--accent-gbv)"},
  {cat:"gbv",name:"Gender Violence Recovery Centre",phone:"020 2726300",area:"Nairobi â€“ KNH",county:"nairobi",icon:"ğŸ¥",color:"var(--accent-gbv)"},
  {cat:"gbv",name:"Coalition on Violence Against Women",phone:"020 3874296",area:"Nationwide",county:"all",icon:"ğŸ¤",color:"var(--accent-gbv)"}
];

var CATEGORIES = {
  police:{label:"National Police",dot:"var(--accent-police)"},
  ambulance:{label:"Ambulance / Red Cross",dot:"var(--accent-ambulance)"},
  fire:{label:"Fire Brigade",dot:"var(--accent-fire)"},
  power:{label:"KPLC / Power",dot:"var(--accent-power)"},
  water:{label:"Water Companies",dot:"var(--accent-water)"},
  disaster:{label:"Disaster Response",dot:"var(--accent-disaster)"},
  child:{label:"Child Helpline",dot:"var(--accent-child)"},
  gbv:{label:"GBV Hotline",dot:"var(--accent-gbv)"}
};

var COUNTIES = [
  {value:"all",label:"All Counties"},
  {value:"nairobi",label:"Nairobi"},
  {value:"mombasa",label:"Mombasa"},
  {value:"kisumu",label:"Kisumu"},
  {value:"nakuru",label:"Nakuru"},
  {value:"uasin_gishu",label:"Uasin Gishu (Eldoret)"},
  {value:"kiambu",label:"Kiambu"},
  {value:"machakos",label:"Machakos"},
  {value:"nyeri",label:"Nyeri"}
];

/* === POPULATE COUNTY SELECTOR === */
var countySelect = document.getElementById('countySelect');
countySelect.innerHTML = '';
COUNTIES.forEach(function(c) {
  var opt = document.createElement('option');
  opt.value = c.value;
  opt.textContent = c.label;
  countySelect.appendChild(opt);
});

/* === RENDER CONTACTS === */
function phoneToTel(p) {
  return p.replace(/[\s\-()]/g, '');
}

function renderContacts() {
  var county = countySelect.value;
  var query = document.getElementById('searchInput').value.toLowerCase().trim();
  var container = document.getElementById('contactList');
  var noResults = document.getElementById('noResults');
  container.innerHTML = '';
  var totalVisible = 0;

  var catKeys = Object.keys(CATEGORIES);
  catKeys.forEach(function(catKey) {
    var catInfo = CATEGORIES[catKey];
    var items = CONTACTS.filter(function(c) {
      if (c.cat !== catKey) return false;
      if (county !== 'all' && c.county !== 'all' && c.county !== county) return false;
      if (query) {
        var haystack = (c.name + ' ' + c.phone + ' ' + c.area).toLowerCase();
        return haystack.indexOf(query) !== -1;
      }
      return true;
    });

    if (items.length === 0) return;
    totalVisible += items.length;

    var section = document.createElement('section');
    section.className = 'cat-section';

    var header = document.createElement('div');
    header.className = 'cat-header';
    header.innerHTML =
      '<span class="cat-dot" style="background:' + catInfo.dot + '"></span>' +
      '<h3>' + catInfo.label + '</h3>' +
      '<span class="count">' + items.length + '</span>';
    section.appendChild(header);

    items.forEach(function(c) {
      var tel = phoneToTel(c.phone);
      var a = document.createElement('a');
      a.href = 'tel:' + tel;
      a.className = 'card';
      a.setAttribute('aria-label', 'Call ' + c.name + ' at ' + c.phone);
      a.innerHTML =
        '<span class="card-icon" style="background:' + c.color + '">' + c.icon + '</span>' +
        '<span class="card-body">' +
          '<span class="card-name">' + c.name + '</span>' +
          '<span class="card-area">' + c.area + '</span>' +
        '</span>' +
        '<span class="card-call">' +
          '<span class="card-phone">' + c.phone + '</span>' +
          '<span class="card-call-btn"><svg viewBox="0 0 24 24"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg></span>' +
        '</span>';
      section.appendChild(a);
    });

    container.appendChild(section);
  });

  if (totalVisible === 0) {
    noResults.style.display = 'block';
  } else {
    noResults.style.display = 'none';
  }
}

/* === EVENT LISTENERS === */
countySelect.addEventListener('change', renderContacts);
document.getElementById('searchInput').addEventListener('input', renderContacts);

/* === SHARE / COPY === */
function showToast(msg) {
  var toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(function() { toast.classList.remove('show'); }, 2500);
}

document.getElementById('shareWhatsApp').addEventListener('click', function() {
  var text = encodeURIComponent('ğŸ†˜ Kenya Emergency Contacts â€“ Save this link!\n\nğŸš“ Police: 999\nğŸš‘ Red Cross: 1199\nğŸš’ Fire: 999\nğŸ“ Universal: 112\nâš¡ KPLC: 0703 070 707\nğŸ‘¶ Childline: 116\nğŸ›¡ï¸ GBV: 1195\n\nFull list: ' + window.location.href);
  window.open('https://wa.me/?text=' + text, '_blank');
});

document.getElementById('copyLink').addEventListener('click', function() {
  if (navigator.clipboard && navigator.clipboard.writeText) {
    navigator.clipboard.writeText(window.location.href).then(function() {
      showToast('Link saved to clipboard!');
    });
  } else {
    showToast('Could not copy link');
  }
});

/* === INIT === */
renderContacts();
</script>
</body>
</html>
